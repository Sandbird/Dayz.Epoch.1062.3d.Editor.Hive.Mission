
private ["_crate","_player","_dir","_pos"];

_crate = _this select 0;
_player = player;

// Location of player and crate
_dir = getdir _player;
_pos = getposATL _player;
_pos = [(_pos select 0)+1*sin(_dir),(_pos select 1)+1*cos(_dir), (_pos select 2)];

selectDelay=0;
// Run delaymenu
delaymenu = 
[
	["",true],
	["Select delay", [-1], "", -5, [["expression", ""]], "1", "0"],
	["", [-1], "", -5, [["expression", ""]], "1", "0"],
	["30 seconds", [], "", -5, [["expression", "selectDelay=30;"]], "1", "1"],
	["1 min", [], "", -5, [["expression", "selectDelay=60;"]], "1", "1"],
	["3 min", [], "", -5, [["expression", "selectDelay=180;"]], "1", "1"],
	["5 min", [], "", -5, [["expression", "selectDelay=300;"]], "1", "1"],
	["10 min", [], "", -5, [["expression", "selectDelay=600;"]], "1", "1"],
	["30 min", [], "", -5, [["expression", "selectDelay=1800;"]], "1", "1"],
	["", [-1], "", -5, [["expression", ""]], "1", "0"],
	["No timer", [], "", -5, [["expression", "selectDelay=0;"]], "1", "1"],
	["", [-1], "", -5, [["expression", ""]], "1", "0"]
];
showCommandingMenu "#USER:delaymenu";

WaitUntil{commandingMenu == ""};
_selectDelay = selectDelay;

EAT_PVEH_crateSpawn = [_selectDelay,_crate,[_dir,_pos],_player,dayz_authKey];
	publicVariableServer "EAT_PVEH_crateSpawn";
EAT_PVEH_crateSpawn	spawn EAT_crateSpawn;

if(selectDelay != 0) then {
	format[_crate + "crate will disappear in %1 seconds.",selectDelay] call dayz_rollingMessages;
} else {
	format[_crate + " has no timer. Shoot it to destroy."] call dayz_rollingMessages;
};